<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EverRead â€“ Free Public Domain eBooks</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    #readerContent {
      scrollbar-width: thin;
      scrollbar-color: #a0aec0 #edf2f7;
      font-family: Georgia, serif;
      font-size: 1.1rem;
      line-height: 1.65;
      padding: 1rem;
      background-color: #f9fafb;
      border-radius: 0.5rem;
      box-shadow: 0 0 8px rgb(0 0 0 / 0.05);
      white-space: pre-wrap;
      color: #1a202c;
      text-shadow: 0 0 2px rgba(0,0,0,0.03);
      max-height: 60vh;
      overflow-y: auto;
      user-select: text;
    }

    .spinner {
      margin: auto;
      width: 48px;
      height: 48px;
      border: 5px solid #cbd5e1;
      border-top: 5px solid #4f46e5;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    #readerOverlay {
      display: none;
    }
    #readerOverlay.active {
      display: flex;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800">

  <header class="bg-indigo-700 text-white p-6 shadow-md">
    <h1 class="text-4xl font-bold text-center">ðŸ“– EverRead</h1>
    <p class="text-center mt-2 text-lg">Free public domain eBooks â€” read in-page, page by page.</p>
  </header>

  <main class="p-6 max-w-6xl mx-auto grid gap-6 grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4">

    <!-- Books inserted by JS -->

  </main>

  <!-- IN-PAGE READER WINDOW -->
  <div id="readerOverlay" class="fixed inset-0 bg-black/60 items-center justify-center z-50">
    <div class="bg-white w-[90%] max-w-3xl max-h-[90vh] rounded-xl shadow-xl p-6 flex flex-col">
      <div class="flex justify-between items-center mb-4">
        <h2 id="readerTitle" class="text-xl font-bold">Loading...</h2>
        <button onclick="closeReader()" class="text-red-600 font-semibold hover:underline text-sm">Close</button>
      </div>
      <div id="readerContent" class="flex-1 relative">
        <div id="loadingSpinner" class="spinner"></div>
        <div id="textContent" style="display:none;"></div>
      </div>
      <div class="flex justify-between items-center mt-4">
        <button onclick="prevPage()" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 text-sm">&larr; Prev</button>
        <span id="readerPage" class="text-sm text-gray-600">Page 0</span>
        <button onclick="nextPage()" class="bg-gray-200 px-4 py-2 rounded hover:bg-gray-300 text-sm">Next &rarr;</button>
      </div>
    </div>
  </div>

  <footer class="text-center text-gray-500 text-sm py-6">
    <p>&copy; 2025 EverRead. Books from <a href="https://standardebooks.org" class="underline hover:text-gray-700" target="_blank" rel="noopener noreferrer">Standard Ebooks</a>.</p>
  </footer>

  <script>
    // Book list from Standard Ebooks with metadata and direct .txt URL
    const books = [
      {
        title: "Pride and Prejudice",
        author: "Jane Austen",
        cover: "https://standardebooks.org/ebooks/jane-austen/pride-and-prejudice/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/jane-austen/pride-and-prejudice/downloads/pride-and-prejudice.txt"
      },
      {
        title: "Frankenstein",
        author: "Mary Shelley",
        cover: "https://standardebooks.org/ebooks/mary-shelley/frankenstein/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/mary-shelley/frankenstein/downloads/frankenstein.txt"
      },
      {
        title: "Dracula",
        author: "Bram Stoker",
        cover: "https://standardebooks.org/ebooks/bram-stoker/dracula/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/bram-stoker/dracula/downloads/dracula.txt"
      },
      {
        title: "The Adventures of Sherlock Holmes",
        author: "Arthur Conan Doyle",
        cover: "https://standardebooks.org/ebooks/arthur-conan-doyle/the-adventures-of-sherlock-holmes/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/arthur-conan-doyle/the-adventures-of-sherlock-holmes/downloads/the-adventures-of-sherlock-holmes.txt"
      },
      {
        title: "Jane Eyre",
        author: "Charlotte BrontÃ«",
        cover: "https://standardebooks.org/ebooks/charlotte-bronte/jane-eyre/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/charlotte-bronte/jane-eyre/downloads/jane-eyre.txt"
      },
      {
        title: "Great Expectations",
        author: "Charles Dickens",
        cover: "https://standardebooks.org/ebooks/charles-dickens/great-expectations/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/charles-dickens/great-expectations/downloads/great-expectations.txt"
      },
      {
        title: "The Picture of Dorian Gray",
        author: "Oscar Wilde",
        cover: "https://standardebooks.org/ebooks/oscar-wilde/the-picture-of-dorian-gray/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/oscar-wilde/the-picture-of-dorian-gray/downloads/the-picture-of-dorian-gray.txt"
      },
      {
        title: "Dr. Jekyll and Mr. Hyde",
        author: "Robert Louis Stevenson",
        cover: "https://standardebooks.org/ebooks/robert-louis-stevenson/strange-case-of-dr-jekyll-and-mr-hyde/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/robert-louis-stevenson/strange-case-of-dr-jekyll-and-mr-hyde/downloads/strange-case-of-dr-jekyll-and-mr-hyde.txt"
      },
      {
        title: "Wuthering Heights",
        author: "Emily BrontÃ«",
        cover: "https://standardebooks.org/ebooks/emily-bronte/wuthering-heights/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/emily-bronte/wuthering-heights/downloads/wuthering-heights.txt"
      },
      {
        title: "Sense and Sensibility",
        author: "Jane Austen",
        cover: "https://standardebooks.org/ebooks/jane-austen/sense-and-sensibility/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/jane-austen/sense-and-sensibility/downloads/sense-and-sensibility.txt"
      },
      {
        title: "The War of the Worlds",
        author: "H. G. Wells",
        cover: "https://standardebooks.org/ebooks/h-g-wells/the-war-of-the-worlds/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/h-g-wells/the-war-of-the-worlds/downloads/the-war-of-the-worlds.txt"
      },
      {
        title: "The Call of the Wild",
        author: "Jack London",
        cover: "https://standardebooks.org/ebooks/jack-london/the-call-of-the-wild/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/jack-london/the-call-of-the-wild/downloads/the-call-of-the-wild.txt"
      },
      {
        title: "Heart of Darkness",
        author: "Joseph Conrad",
        cover: "https://standardebooks.org/ebooks/joseph-conrad/heart-of-darkness/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/joseph-conrad/heart-of-darkness/downloads/heart-of-darkness.txt"
      },
      {
        title: "The Strange Case of Dr Jekyll and Mr Hyde",
        author: "Robert Louis Stevenson",
        cover: "https://standardebooks.org/ebooks/robert-louis-stevenson/strange-case-of-dr-jekyll-and-mr-hyde/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/robert-louis-stevenson/strange-case-of-dr-jekyll-and-mr-hyde/downloads/strange-case-of-dr-jekyll-and-mr-hyde.txt"
      },
      {
        title: "The Secret Garden",
        author: "Frances Hodgson Burnett",
        cover: "https://standardebooks.org/ebooks/frances-hodgson-burnett/the-secret-garden/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/frances-hodgson-burnett/the-secret-garden/downloads/the-secret-garden.txt"
      },
      {
        title: "The Jungle Book",
        author: "Rudyard Kipling",
        cover: "https://standardebooks.org/ebooks/rudyard-kipling/the-jungle-book/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/rudyard-kipling/the-jungle-book/downloads/the-jungle-book.txt"
      },
      {
        title: "Treasure Island",
        author: "Robert Louis Stevenson",
        cover: "https://standardebooks.org/ebooks/robert-louis-stevenson/treasure-island/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/robert-louis-stevenson/treasure-island/downloads/treasure-island.txt"
      },
      {
        title: "The Importance of Being Earnest",
        author: "Oscar Wilde",
        cover: "https://standardebooks.org/ebooks/oscar-wilde/the-importance-of-being-earnest/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/oscar-wilde/the-importance-of-being-earnest/downloads/the-importance-of-being-earnest.txt"
      },
      {
        title: "Around the World in Eighty Days",
        author: "Jules Verne",
        cover: "https://standardebooks.org/ebooks/jules-verne/around-the-world-in-eighty-days/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/jules-verne/around-the-world-in-eighty-days/downloads/around-the-world-in-eighty-days.txt"
      },
      {
        title: "Alice's Adventures in Wonderland",
        author: "Lewis Carroll",
        cover: "https://standardebooks.org/ebooks/lewis-carroll/alices-adventures-in-wonderland/images/cover.jpg",
        textUrl: "https://standardebooks.org/ebooks/lewis-carroll/alices-adventures-in-wonderland/downloads/alices-adventures-in-wonderland.txt"
      }
    ];

    let pages = [], currentPage = 0;

    function paginate(text, wordsPerPage = 300) {
      const words = text.split(/\s+/);
      const pageCount = Math.ceil(words.length / wordsPerPage);
      const result = [];
      for (let i = 0; i < pageCount; i++) {
        result.push(words.slice(i * wordsPerPage, (i + 1) * wordsPerPage).join(" "));
      }
      return result;
    }

    function openReader(title, textUrl) {
      const overlay = document.getElementById("readerOverlay");
      const titleEl = document.getElementById("readerTitle");
      const loadingSpinner = document.getElementById("loadingSpinner");
      const textContent = document.getElementById("textContent");
      const pageEl = document.getElementById("readerPage");

      overlay.classList.add("active");
      titleEl.textContent = title;
      loadingSpinner.style.display = "block";
      textContent.style.display = "none";
      pageEl.textContent = "";

      fetch(textUrl)
        .then(res => {
          if (!res.ok) throw new Error(`HTTP error: ${res.status}`);
          return res.text();
        })
        .then(text => {
          pages = paginate(text);
          currentPage = 0;
          showPage();
          loadingSpinner.style.display = "none";
          textContent.style.display = "block";
        })
        .catch(err => {
          loadingSpinner.style.display = "none";
          textContent.style.display = "block";
          textContent.textContent = "Failed to load book.";
          console.error(err);
        });
    }

    function closeReader() {
      document.getElementById("readerOverlay").classList.remove("active");
      pages = [];
      currentPage = 0;
    }

    function showPage() {
      const textContent = document.getElementById("textContent");
      const pageEl = document.getElementById("readerPage");
      textContent.textContent = pages[currentPage] || "No content.";
      pageEl.textContent = `Page ${currentPage + 1} of ${pages.length}`;
    }

    function nextPage() {
      if (currentPage < pages.length - 1) {
        currentPage++;
        showPage();
      }
    }

    function prevPage() {
      if (currentPage > 0) {
        currentPage--;
        showPage();
      }
    }

    // Dynamically render book cards on page load
    window.onload = () => {
      const main = document.querySelector("main");
      books.forEach(book => {
        const card = document.createElement("div");
        card.className = "bg-white rounded-xl shadow p-4 flex flex-col";

        const img = document.createElement("img");
        img.src = book.cover;
        img.alt = `${book.title} cover`;
        img.className = "w-full h-60 object-cover rounded mb-3";
        card.appendChild(img);

        const title = document.createElement("h2");
        title.textContent = book.title;
        title.className = "text-xl font-semibold";
        card.appendChild(title);

        const author = document.createElement("p");
        author.textContent = book.author;
        author.className = "text-sm text-gray-600 mb-2";
        card.appendChild(author);

        const btn = document.createElement("button");
        btn.textContent = "Read Now";
        btn.className = "bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 mt-auto";
        btn.onclick = () => openReader(book.title, book.textUrl);
        card.appendChild(btn);

        main.appendChild(card);
      });
    };
  </script>

</body>
</html>
